/*
 * jCarousel - Riding carousels with jQuery
 *   http://sorgalla.com/jcarousel/
 *
 * Copyright (c) 2006 Jan Sorgalla (http://sorgalla.com)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Built on top of the jQuery library
 *   http://jquery.com
 *
 * Inspired by the "Carousel Component" by Bill Scott
 *   http://billwscott.com/carousel/
 */
(function(t){var e={vertical:!1,rtl:!1,start:1,offset:1,size:null,scroll:3,visible:null,animation:"normal",easing:"swing",auto:0,wrap:null,initCallback:null,setupCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,animationStepCallback:null,buttonNextHTML:"<div></div>",buttonPrevHTML:"<div></div>",buttonNextEvent:"click",buttonPrevEvent:"click",buttonNextCallback:null,buttonPrevCallback:null,itemFallbackDimension:null},i=!1;t(window).bind("load.jcarousel",function(){i=!0}),t.jcarousel=function(n,s){this.options=t.extend({},e,s||{}),this.autoStopped=this.locked=!1,this.buttonPrevState=this.buttonNextState=this.buttonPrev=this.buttonNext=this.list=this.clip=this.container=null,s&&s.rtl!==void 0||(this.options.rtl=(t(n).attr("dir")||t("html").attr("dir")||"").toLowerCase()=="rtl"),this.wh=this.options.vertical?"height":"width",this.lt=this.options.vertical?"top":this.options.rtl?"right":"left";for(var o="",a=n.className.split(" "),r=0;r<a.length;r++)if(a[r].indexOf("jcarousel-skin")!=-1){t(n).removeClass(a[r]),o=a[r];break}n.nodeName.toUpperCase()=="UL"||n.nodeName.toUpperCase()=="OL"?(this.list=t(n),this.clip=this.list.parents(".jcarousel-clip"),this.container=this.list.parents(".jcarousel-container")):(this.container=t(n),this.list=this.container.find("ul,ol").eq(0),this.clip=this.container.find(".jcarousel-clip")),this.clip.size()===0&&(this.clip=this.list.wrap("<div></div>").parent()),this.container.size()===0&&(this.container=this.clip.wrap("<div></div>").parent()),""!==o&&this.container.parent()[0].className.indexOf("jcarousel-skin")==-1&&this.container.wrap('<div class=" '+o+'"></div>'),this.buttonPrev=t(".jcarousel-prev",this.container),this.buttonPrev.size()===0&&this.options.buttonPrevHTML!==null&&(this.buttonPrev=t(this.options.buttonPrevHTML).appendTo(this.container)),this.buttonPrev.addClass(this.className("jcarousel-prev")),this.buttonNext=t(".jcarousel-next",this.container),this.buttonNext.size()===0&&this.options.buttonNextHTML!==null&&(this.buttonNext=t(this.options.buttonNextHTML).appendTo(this.container)),this.buttonNext.addClass(this.className("jcarousel-next")),this.clip.addClass(this.className("jcarousel-clip")).css({position:"relative"}),this.list.addClass(this.className("jcarousel-list")).css({overflow:"hidden",position:"relative",top:0,margin:0,padding:0}).css(this.options.rtl?"right":"left",0),this.container.addClass(this.className("jcarousel-container")).css({position:"relative"}),!this.options.vertical&&this.options.rtl&&this.container.addClass("jcarousel-direction-rtl").attr("dir","rtl");var l=this.options.visible!==null?Math.ceil(this.clipping()/this.options.visible):null,o=this.list.children("li"),c=this;if(o.size()>0){var u=0,h=this.options.offset;o.each(function(){c.format(this,h++),u+=c.dimension(this,l)}),this.list.css(this.wh,u+100+"px"),s&&s.size!==void 0||(this.options.size=o.size())}this.container.css("display","block"),this.buttonNext.css("display","block"),this.buttonPrev.css("display","block"),this.funcNext=function(){c.next()},this.funcPrev=function(){c.prev()},this.funcResize=function(){c.resizeTimer&&clearTimeout(c.resizeTimer),c.resizeTimer=setTimeout(function(){c.reload()},100)},this.options.initCallback!==null&&this.options.initCallback(this,"init"),!i&&t.browser.safari?(this.buttons(!1,!1),t(window).bind("load.jcarousel",function(){c.setup()})):this.setup()};var n=t.jcarousel;n.fn=n.prototype={jcarousel:"0.2.8"},n.fn.extend=n.extend=t.extend,n.fn.extend({setup:function(){if(this.prevLast=this.prevFirst=this.last=this.first=null,this.animating=!1,this.tail=this.resizeTimer=this.timer=null,this.inTail=!1,!this.locked){this.list.css(this.lt,this.pos(this.options.offset)+"px");var e=this.pos(this.options.start,!0);this.prevFirst=this.prevLast=null,this.animate(e,!1),t(window).unbind("resize.jcarousel",this.funcResize).bind("resize.jcarousel",this.funcResize),this.options.setupCallback!==null&&this.options.setupCallback(this)}},reset:function(){this.list.empty(),this.list.css(this.lt,"0px"),this.list.css(this.wh,"10px"),this.options.initCallback!==null&&this.options.initCallback(this,"reset"),this.setup()},reload:function(){if(this.tail!==null&&this.inTail&&this.list.css(this.lt,n.intval(this.list.css(this.lt))+this.tail),this.tail=null,this.inTail=!1,this.options.reloadCallback!==null&&this.options.reloadCallback(this),this.options.visible!==null){var t=this,e=Math.ceil(this.clipping()/this.options.visible),i=0,s=0;this.list.children("li").each(function(n){i+=t.dimension(this,e),n+1<t.first&&(s=i)}),this.list.css(this.wh,i+"px"),this.list.css(this.lt,-s+"px")}this.scroll(this.first,!1)},lock:function(){this.locked=!0,this.buttons()},unlock:function(){this.locked=!1,this.buttons()},size:function(t){return void 0!==t&&(this.options.size=t,this.locked||this.buttons()),this.options.size},has:function(t,e){void 0!==e&&e||(e=t),this.options.size!==null&&e>this.options.size&&(e=this.options.size);for(var i=t;e>=i;i++){var n=this.get(i);if(!n.length||n.hasClass("jcarousel-item-placeholder"))return!1}return!0},get:function(e){return t(">.jcarousel-item-"+e,this.list)},add:function(e,i){var s=this.get(e),o=0,a=t(i);if(s.length===0){for(var r,l=n.intval(e),s=this.create(e);;)if(r=this.get(--l),0>=l||r.length){0>=l?this.list.prepend(s):r.after(s);break}}else o=this.dimension(s);return a.get(0).nodeName.toUpperCase()=="LI"?(s.replaceWith(a),s=a):s.empty().append(i),this.format(s.removeClass(this.className("jcarousel-item-placeholder")),e),a=this.options.visible!==null?Math.ceil(this.clipping()/this.options.visible):null,o=this.dimension(s,a)-o,e>0&&e<this.first&&this.list.css(this.lt,n.intval(this.list.css(this.lt))-o+"px"),this.list.css(this.wh,n.intval(this.list.css(this.wh))+o+"px"),s},remove:function(t){var e=this.get(t);if(e.length&&!(t>=this.first&&t<=this.last)){var i=this.dimension(e);t<this.first&&this.list.css(this.lt,n.intval(this.list.css(this.lt))+i+"px"),e.remove(),this.list.css(this.wh,n.intval(this.list.css(this.wh))-i+"px")}},next:function(){this.tail===null||this.inTail?this.scroll(this.options.wrap!="both"&&this.options.wrap!="last"||this.options.size===null||this.last!=this.options.size?this.first+this.options.scroll:1):this.scrollTail(!1)},prev:function(){this.tail!==null&&this.inTail?this.scrollTail(!0):this.scroll(this.options.wrap!="both"&&this.options.wrap!="first"||this.options.size===null||this.first!=1?this.first-this.options.scroll:this.options.size)},scrollTail:function(t){if(!this.locked&&!this.animating&&this.tail){this.pauseAuto();var e=n.intval(this.list.css(this.lt)),e=t?e+this.tail:e-this.tail;this.inTail=!t,this.prevFirst=this.first,this.prevLast=this.last,this.animate(e)}},scroll:function(t,e){!this.locked&&!this.animating&&(this.pauseAuto(),this.animate(this.pos(t),e))},pos:function(t,e){var i=n.intval(this.list.css(this.lt));if(this.locked||this.animating)return i;this.options.wrap!="circular"&&(t=1>t?1:this.options.size&&t>this.options.size?this.options.size:t);for(var s=this.first>t,o=this.options.wrap!="circular"&&this.first<=1?1:this.first,a=s?this.get(o):this.get(this.last),r=s?o:o-1,l=null,c=0,u=!1,h=0;s?--r>=t:++r<t;)l=this.get(r),u=!l.length,l.length===0&&(l=this.create(r).addClass(this.className("jcarousel-item-placeholder")),a[s?"before":"after"](l),this.first!==null&&this.options.wrap=="circular"&&this.options.size!==null&&(0>=r||r>this.options.size))&&(a=this.get(this.index(r)),a.length&&(l=this.add(r,a.clone(!0)))),a=l,h=this.dimension(l),u&&(c+=h),this.first!==null&&(this.options.wrap=="circular"||r>=1&&(this.options.size===null||r<=this.options.size))&&(i=s?i+h:i-h);for(var o=this.clipping(),p=[],d=0,f=0,a=this.get(t-1),r=t;++d;){if(l=this.get(r),u=!l.length,l.length===0&&(l=this.create(r).addClass(this.className("jcarousel-item-placeholder")),a.length===0?this.list.prepend(l):a[s?"before":"after"](l),this.first!==null&&this.options.wrap=="circular"&&this.options.size!==null&&(0>=r||r>this.options.size)&&(a=this.get(this.index(r)),a.length&&(l=this.add(r,a.clone(!0))))),a=l,h=this.dimension(l),0===h)throw Error("jCarousel: No width/height set for items. This will cause an infinite loop. Aborting...");if(this.options.wrap!="circular"&&this.options.size!==null&&r>this.options.size?p.push(l):u&&(c+=h),f+=h,f>=o)break;r++}for(l=0;l<p.length;l++)p[l].remove();if(c>0&&(this.list.css(this.wh,this.dimension(this.list)+c+"px"),s&&(i-=c,this.list.css(this.lt,n.intval(this.list.css(this.lt))-c+"px"))),c=t+d-1,this.options.wrap!="circular"&&this.options.size&&c>this.options.size&&(c=this.options.size),r>c)for(d=0,r=c,f=0;++d&&(l=this.get(r--),l.length)&&(f+=this.dimension(l),!(f>=o)););for(r=c-d+1,this.options.wrap!="circular"&&1>r&&(r=1),this.inTail&&s&&(i+=this.tail,this.inTail=!1),this.tail=null,this.options.wrap!="circular"&&c==this.options.size&&c-d+1>=1&&(s=n.intval(this.get(c).css(this.options.vertical?"marginBottom":"marginRight")),f-s>o)&&(this.tail=f-o-s),e&&t===this.options.size&&this.tail&&(i-=this.tail,this.inTail=!0);t-->r;)i+=this.dimension(this.get(t));return this.prevFirst=this.first,this.prevLast=this.last,this.first=r,this.last=c,i},animate:function(e,i){if(!this.locked&&!this.animating){this.animating=!0;var n=this,s=function(){if(n.animating=!1,0===e&&n.list.css(n.lt,0),!n.autoStopped&&(n.options.wrap=="circular"||n.options.wrap=="both"||n.options.wrap=="last"||n.options.size===null||n.last<n.options.size||n.last==n.options.size&&n.tail!==null&&!n.inTail)&&n.startAuto(),n.buttons(),n.notify("onAfterAnimation"),n.options.wrap=="circular"&&n.options.size!==null)for(var t=n.prevFirst;t<=n.prevLast;t++)null!==t&&!(t>=n.first&&t<=n.last)&&(1>t||t>n.options.size)&&n.remove(t)};if(this.notify("onBeforeAnimation"),this.options.animation&&i!==!1){var o=this.options.vertical?{top:e}:this.options.rtl?{right:e}:{left:e},s={duration:this.options.animation,easing:this.options.easing,complete:s};t.isFunction(this.options.animationStepCallback)&&(s.step=this.options.animationStepCallback),this.list.animate(o,s)}else this.list.css(this.lt,e+"px"),s()}},startAuto:function(t){if(void 0!==t&&(this.options.auto=t),this.options.auto===0)return this.stopAuto();if(this.timer===null){this.autoStopped=!1;var e=this;this.timer=window.setTimeout(function(){e.next()},this.options.auto*1e3)}},stopAuto:function(){this.pauseAuto(),this.autoStopped=!0},pauseAuto:function(){this.timer!==null&&(window.clearTimeout(this.timer),this.timer=null)},buttons:function(t,e){null!=t||(t=!this.locked&&this.options.size!==0&&(this.options.wrap&&this.options.wrap!="first"||this.options.size===null||this.last<this.options.size),this.locked||this.options.wrap&&this.options.wrap!="first"||this.options.size===null||!(this.last>=this.options.size))||(t=this.tail!==null&&!this.inTail),null!=e||(e=!this.locked&&this.options.size!==0&&(this.options.wrap&&this.options.wrap!="last"||this.first>1),this.locked||this.options.wrap&&this.options.wrap!="last"||this.options.size===null||this.first!=1)||(e=this.tail!==null&&this.inTail);var i=this;this.buttonNext.size()>0?(this.buttonNext.unbind(this.options.buttonNextEvent+".jcarousel",this.funcNext),t&&this.buttonNext.bind(this.options.buttonNextEvent+".jcarousel",this.funcNext),this.buttonNext[t?"removeClass":"addClass"](this.className("jcarousel-next-disabled")).attr("disabled",t?!1:!0),this.options.buttonNextCallback!==null&&this.buttonNext.data("jcarouselstate")!=t&&this.buttonNext.each(function(){i.options.buttonNextCallback(i,this,t)}).data("jcarouselstate",t)):this.options.buttonNextCallback!==null&&this.buttonNextState!=t&&this.options.buttonNextCallback(i,null,t),this.buttonPrev.size()>0?(this.buttonPrev.unbind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev),e&&this.buttonPrev.bind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev),this.buttonPrev[e?"removeClass":"addClass"](this.className("jcarousel-prev-disabled")).attr("disabled",e?!1:!0),this.options.buttonPrevCallback!==null&&this.buttonPrev.data("jcarouselstate")!=e&&this.buttonPrev.each(function(){i.options.buttonPrevCallback(i,this,e)}).data("jcarouselstate",e)):this.options.buttonPrevCallback!==null&&this.buttonPrevState!=e&&this.options.buttonPrevCallback(i,null,e),this.buttonNextState=t,this.buttonPrevState=e},notify:function(t){var e=this.prevFirst===null?"init":this.prevFirst<this.first?"next":"prev";this.callback("itemLoadCallback",t,e),this.prevFirst!==this.first&&(this.callback("itemFirstInCallback",t,e,this.first),this.callback("itemFirstOutCallback",t,e,this.prevFirst)),this.prevLast!==this.last&&(this.callback("itemLastInCallback",t,e,this.last),this.callback("itemLastOutCallback",t,e,this.prevLast)),this.callback("itemVisibleInCallback",t,e,this.first,this.last,this.prevFirst,this.prevLast),this.callback("itemVisibleOutCallback",t,e,this.prevFirst,this.prevLast,this.first,this.last)},callback:function(e,i,n,s,o,a,r){if(this.options[e]!=null&&(typeof this.options[e]=="object"||"onAfterAnimation"==i)){var l=typeof this.options[e]=="object"?this.options[e][i]:this.options[e];if(t.isFunction(l)){var c=this;if(void 0===s)l(c,n,i);else if(void 0===o)this.get(s).each(function(){l(c,this,s,n,i)});else for(var e=function(t){c.get(t).each(function(){l(c,this,t,n,i)})},u=s;o>=u;u++)null!==u&&!(u>=a&&r>=u)&&e(u)}}},create:function(t){return this.format("<li></li>",t)},format:function(e,i){for(var e=t(e),n=e.get(0).className.split(" "),s=0;s<n.length;s++)n[s].indexOf("jcarousel-")!=-1&&e.removeClass(n[s]);return e.addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-"+i)).css({"float":this.options.rtl?"right":"left","list-style":"none"}).attr("jcarouselindex",i),e},className:function(t){return t+" "+t+(this.options.vertical?"-vertical":"-horizontal")},dimension:function(e,i){var s=t(e);if(null==i)return this.options.vertical?s.outerHeight(!0)||n.intval(this.options.itemFallbackDimension):s.outerWidth(!0)||n.intval(this.options.itemFallbackDimension);var o=this.options.vertical?i-n.intval(s.css("marginTop"))-n.intval(s.css("marginBottom")):i-n.intval(s.css("marginLeft"))-n.intval(s.css("marginRight"));return t(s).css(this.wh,o+"px"),this.dimension(s)},clipping:function(){return this.options.vertical?this.clip[0].offsetHeight-n.intval(this.clip.css("borderTopWidth"))-n.intval(this.clip.css("borderBottomWidth")):this.clip[0].offsetWidth-n.intval(this.clip.css("borderLeftWidth"))-n.intval(this.clip.css("borderRightWidth"))},index:function(t,e){return null==e&&(e=this.options.size),Math.round(((t-1)/e-Math.floor((t-1)/e))*e)+1}}),n.extend({defaults:function(i){return t.extend(e,i||{})},intval:function(t){return t=parseInt(t,10),isNaN(t)?0:t},windowLoaded:function(){i=!0}}),t.fn.jcarousel=function(e){if("string"==typeof e){var i=t(this).data("jcarousel"),s=Array.prototype.slice.call(arguments,1);return i[e].apply(i,s)}return this.each(function(){var i=t(this).data("jcarousel");i?(e&&t.extend(i.options,e),i.reload()):t(this).data("jcarousel",new n(this,e))})}})(jQuery),/*  9/21/2011
		PikaChoose
	Jquery plugin for photo galleries
    Copyright (C) 2011 Jeremy Fry

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/
function(t){var e={autoPlay:!0,speed:5e3,text:{play:"",stop:"",previous:"Previous",next:"Next"},transition:[1],showCaption:!0,IESafe:!1,showTooltips:!1,carousel:!1,carouselVertical:!1,animationFinished:null,buildFinished:null,bindFinished:null,startOn:0,thumbOpacity:.4,hoverPause:!1,animationSpeed:600,fadeThumbsIn:!1,carouselOptions:{}};t.fn.PikaChoose=function(e){return this.each(function(){t(this).data("pikachoose",new i(this,e))})},t.PikaChoose=function(i,n){if(this.options=t.extend({},e,n||{}),this.list=null,this.image=null,this.anchor=null,this.caption=null,this.imgNav=null,this.imgPlay=null,this.imgPrev=null,this.imgNext=null,this.textNext=null,this.textPrev=null,this.previous=null,this.next=null,this.aniWrap=null,this.aniDiv=null,this.aniImg=null,this.thumbs=null,this.transition=null,this.active=null,this.tooltip=null,this.animating=!1,this.stillOut=null,this.counter=null,this.timeOut=null,typeof this.options.data!="undefined"&&(i=t("<ul></ul>").appendTo(i),t.each(this.options.data,function(){if(typeof this.link!="undefined"){var e=t("<li><a href='"+this.link+"'><img></a></li>").appendTo(i);typeof this.title!="undefined"&&e.find("a").attr("title",this.title)}else var e=t("<li><img></li>").appendTo(i);typeof this.caption!="undefined"&&e.append("<span>"+this.caption+"</span>"),typeof this.thumbnail!="undefined"?(e.find("img").attr("ref",this.image),e.find("img").attr("src",this.thumbnail)):e.find("img").attr("src",this.image)})),i.nodeName=="UL"||i.nodeName=="OL"||i instanceof jQuery){this.list=t(i),this.list.hide(),this.build(),this.bindEvents();for(var s=0,o=0,a=0;25>a;a++){var r='<div col="'+s+'" row="'+o+'"></div>';this.aniDiv.append(r),s++,5==s&&(o++,s=0)}}};var i=t.PikaChoose;i.fn=i.prototype={pikachoose:"4.3.4"},t.fn.pikachoose=t.fn.PikaChoose,i.fn.extend=i.extend=t.extend,i.fn.extend({build:function(){this.step=0,this.wrap=t("<div class='pika-stage'></div>").insertBefore(this.list),this.image=t("<img>").appendTo(this.wrap),this.imgNav=t("<div class='pika-imgnav'></div>").insertAfter(this.image),this.imgPlay=t("<a></a>").appendTo(this.imgNav),this.counter=t("<span class='pika-counter'></span>").appendTo(this.imgNav),this.options.autoPlay?this.imgPlay.addClass("pause"):this.imgPlay.addClass("play"),this.imgPrev=t("<a class='previous'></a>").insertAfter(this.imgPlay),this.imgNext=t("<a class='next'></a>").insertAfter(this.imgPrev),this.caption=t("<div class='caption'></div>").insertAfter(this.imgNav).hide(),this.tooltip=t("<div class='pika-tooltip'></div>").insertAfter(this.list).hide(),this.aniWrap=t("<div class='pika-aniwrap'></div>").insertAfter(this.caption),this.aniImg=t("<img>").appendTo(this.aniWrap).hide(),this.aniDiv=t("<div class='pika-ani'></div>").appendTo(this.aniWrap),this.textNav=t("<div class='pika-textnav'></div>").insertAfter(this.aniWrap),this.textPrev=t("<a class='previous'>"+this.options.text.previous+"</a>").appendTo(this.textNav),this.textNext=t("<a class='next'>"+this.options.text.next+"</a>").appendTo(this.textNav),this.list.addClass("pika-thumbs"),this.list.children("li").wrapInner("<div class='clip' />"),this.thumbs=this.list.find("img"),this.active=this.thumbs.eq(this.options.startOn),this.finishAnimating({source:this.active.attr("ref")||this.active.attr("src"),caption:this.active.parents("li:first").find("span:first").html(),clickThrough:this.active.parent().attr("href")||"",clickThroughTitle:this.active.parent().attr("title")||""});var e=this;if(this.thumbs.each(function(){e.createThumb(t(this),e)}),this.options.fadeThumbsIn?this.list.fadeIn():this.list.show(),this.options.carousel){var i={vertical:this.options.carouselVertical,initCallback:function(t){jQuery(t.list).find("img").click(function(i,n){if("undefined"!=typeof n&&n.how=="auto"&&e.options.autoPlay==0)return!1;var s=parseInt(jQuery(this).parents(".jcarousel-item").attr("jcarouselindex")),o=jQuery(this).parents("ul").find("li:last").attr("jcarouselindex")==s-1?!0:!1;o||(s=0>=s-2?0:s-2),s++,t.scroll(s)})}},n=t.extend({},i,this.options.carouselOptions||{});this.list.jcarousel(n)}typeof this.options.buildFinished=="function"&&this.options.buildFinished(this)},createThumb:function(e){var i=e,n=this;i.hide(),t.data(e[0],"clickThrough",i.parent("a").attr("href")||""),t.data(e[0],"clickThroughTitle",i.parent("a").attr("title")||""),i.parent("a").length>0&&i.unwrap(),t.data(e[0],"caption",i.next("span").html()||""),i.next("span").remove(),t.data(e[0],"source",i.attr("ref")||i.attr("src")),t.data(e[0],"order",i.closest("ul").find("li").index(i.parents("li")));var s=t.data(e[0]);t("<img />").bind("load",{data:s},function(){typeof n.options.buildThumbStart=="function"&&n.options.buildThumbStart(n);var e=t(this),o=this.width,a=this.height;0===o&&(o=e.attr("width")),0===a&&(a=e.attr("height"));var r,l=parseInt(i.parents(".clip").css("width").slice(0,-2))/o,c=parseInt(i.parents(".clip").css("height").slice(0,-2))/a;if(c>l){r=c;var u=(o*r-parseInt(i.parents(".clip").css("width").slice(0,-2)))/2*-1;u=Math.round(u),i.css({left:u})}else r=l,i.css({top:0});var h=Math.round(o*r),p=Math.round(a*r);i.css("position","relative");var d={width:h+"px",height:p+"px"};i.css(d),i.hover(function(){clearTimeout(n.stillOut),t(this).stop(!0,!0).fadeTo(250,1),n.options.showTooltips&&n.tooltip.show().stop(!0,!0).html(s.caption).animate({top:t(this).parent().position().top,left:t(this).parent().position().left,opacity:1},"fast")},function(){t(this).hasClass("active")||(t(this).stop(!0,!0).fadeTo(250,n.options.thumbOpacity),n.stillOut=setTimeout(n.hideTooltip,700))}),s.order==n.options.startOn?(i.fadeTo(250,1),i.addClass("active"),i.parents("li").eq(0).addClass("active")):i.fadeTo(250,n.options.thumbOpacity),typeof n.options.buildThumbFinish=="function"&&n.options.buildThumbFinish(n)}).attr("src",i.attr("src"))},bindEvents:function(){this.thumbs.bind("click",{self:this},this.imgClick),this.imgNext.bind("click",{self:this},this.nextClick),this.textNext.bind("click",{self:this},this.nextClick),this.imgPrev.bind("click",{self:this},this.prevClick),this.textPrev.bind("click",{self:this},this.prevClick),this.imgPlay.bind("click",{self:this},this.playClick),this.wrap.bind("mouseenter",{self:this},function(t){t.data.self.imgNav.stop(!0,!0).fadeIn("slow"),t.data.self.options.hoverPause==1&&clearTimeout(t.data.self.timeOut)}),this.wrap.bind("mouseleave",{self:this},function(t){t.data.self.imgNav.stop(!0,!0).fadeOut("slow"),t.data.self.options.autoPlay==1&&t.data.self.options.hoverPause&&(t.data.self.timeOut=setTimeout(function(t){return function(){t.nextClick()}}(t.data.self),t.data.self.options.speed))}),this.tooltip.bind("mouseenter",{self:this},function(t){clearTimeout(t.data.self.stillOut)}),this.tooltip.bind("mouseleave",{self:this},function(t){t.data.self.stillOut=setTimeout(t.data.self.hideTooltip,700)}),typeof this.options.bindsFinished=="function"&&this.options.bindsFinished(this)},hideTooltip:function(){t(".pika-tooltip").animate({opacity:.01})},imgClick:function(e,i){var n=e.data.self,s=t.data(this);if(!n.animating){if("undefined"==typeof i||i.how!="auto")n.options.autoPlay&&n.imgPlay.trigger("click");else if(n.options.autoPlay==0)return!1;n.caption.fadeOut("slow"),n.animating=!0,n.active.fadeTo(300,n.options.thumbOpacity).removeClass("active"),n.active.parents(".active").eq(0).removeClass("active"),n.active=t(this),n.active.addClass("active").fadeTo(200,1),n.active.parents("li").eq(0).addClass("active"),t("<img />").bind("load",{self:n,data:s},function(){n.aniDiv.css({height:n.image.height(),width:n.image.width()}).fadeIn("fast"),n.aniDiv.children("div").css({width:"20%",height:"20%","float":"left"});var e=0;n.options.transition[0]==-1?e=Math.floor(Math.random()*7)+1:(e=n.options.transition[n.step],n.step++,n.step>=n.options.transition.length&&(n.step=0)),n.options.IESafe&&t.browser.msie&&(e=1),n.doAnimation(e,s)}).attr("src",t.data(this).source)}},doAnimation:function(e,i){var n=this;n.image.stop(!0,!1),n.caption.stop().fadeOut();var s=n.aniDiv.children("div").eq(0).width(),o=n.aniDiv.children("div").eq(0).height(),a=new Image;switch(t(a).attr("src",i.source),(a.height!=n.image.height()||a.width!=n.image.width())&&0!=e&&1!=e&&7!=e&&(e=1),n.aniDiv.css({height:a.height,width:a.width}),n.aniDiv.children().each(function(){var e=t(this),n=Math.floor(e.parent().width()/5)*e.attr("col"),s=Math.floor(e.parent().height()/5)*e.attr("row");e.css({background:"url("+i.source+") -"+n+"px -"+s+"px",width:"0px",height:"0px",position:"absolute",top:s+"px",left:n+"px","float":"none"})}),n.aniDiv.hide(),n.aniImg.hide(),e){case 0:n.image.stop(!0,!0).fadeOut(n.options.animationSpeed,function(){n.image.attr("src",i.source).fadeIn(n.options.animationSpeed,function(){n.finishAnimating(i)})});break;case 1:n.aniDiv.hide(),n.aniImg.height(n.image.height()).hide().attr("src",i.source),t.when(n.image.fadeOut(n.options.animationSpeed),n.aniImg.eq(0).fadeIn(n.options.animationSpeed)).done(function(){n.finishAnimating(i)});break;case 2:n.aniDiv.show().children().hide().each(function(e){var a=30*e;t(this).css({opacity:.1}).show().delay(a).animate({opacity:1,width:s,height:o},200,"linear",function(){n.aniDiv.find("div").index(this)==24&&n.finishAnimating(i)})});break;case 3:n.aniDiv.show().children("div:lt(5)").hide().each(function(){var e=t(this).attr("col")*100;t(this).css({opacity:.1,width:s}).show().delay(e).animate({opacity:1,height:n.image.height()},n.options.animationSpeed,"linear",function(){n.aniDiv.find(" div").index(this)==4&&n.finishAnimating(i)})});break;case 4:n.aniDiv.show().children().hide().each(function(e){e>4||(t(this).attr("col")*10,o=n.gapper(t(this),o),t(this).css({opacity:.1,height:"100%"}).show().animate({opacity:1,width:s},n.options.animationSpeed,"linear",function(){n.aniDiv.find(" div").index(this)==4&&n.finishAnimating(i)}))});break;case 5:n.aniDiv.show().children().show().each(function(e){var a=e*Math.floor(Math.random()*5)*7;o=n.gapper(t(this),o),t(".animation div").index(this)==24&&(a=600),t(this).css({height:o,width:s,opacity:.01}).delay(a).animate({opacity:1},n.options.animationSpeed,function(){n.aniDiv.find(" div").index(this)==24&&n.finishAnimating(i)})});break;case 6:n.aniDiv.height(n.image.height()).hide().css({background:"url("+i.source+") top left no-repeat"}),n.aniDiv.children("div").hide(),n.aniDiv.css({width:0}).show().animate({width:n.image.width()},n.options.animationSpeed,function(){n.finishAnimating(i),n.aniDiv.css({background:"transparent"})});break;case 7:n.wrap.css({overflow:"hidden"}),n.aniImg.height(n.image.height()).hide().attr("src",i.source),n.aniDiv.hide(),n.image.css({position:"relative"}).animate({left:"-"+n.wrap.outerWidth()+"px"}),n.aniImg.show(),n.aniWrap.css({left:n.wrap.outerWidth()}).show().animate({left:"0px"},n.options.animationSpeed,function(){n.finishAnimating(i)})}},finishAnimating:function(e){this.animating=!1,this.image.attr("src",e.source),this.image.css({left:"0"}),this.image.show();var i=this;t("<img />").bind("load",function(){i.aniImg.hide(),i.aniDiv.hide()}).attr("src",e.source);var n=this.list.find("img").index(this.active);n++;var s=this.list.find("img").length;if(this.counter.html(n+"/"+s),e.clickThrough!=""?(this.anchor==null&&(this.anchor=this.image.wrap("<a>").parent()),this.anchor.attr("href",e.clickThrough),this.anchor.attr("title",e.clickThroughTitle)):(this.image.parent("a").length>0&&this.image.unwrap(),this.anchor=null),this.options.showCaption&&e.caption!=""&&e.caption!=null&&this.caption.html(e.caption).fadeTo("slow",1),this.options.autoPlay==1){var i=this;this.timeOut=setTimeout(function(t){return function(){t.nextClick()}}(this),this.options.speed,this.timeOut)}typeof this.options.animationFinished=="function"&&this.options.animationFinished(this)},gapper:function(t,e){if(t.attr("row")==9&&t.attr("col")==0){var i=ani_divs.height()-9*e;return i}return e},nextClick:function(t){var e="natural";try{var i=t.data.self;typeof t.data.self.options.next=="function"&&t.data.self.options.next(this)}catch(n){var i=this;e="auto"}var s=i.active.parents("li:first").next().find("img");s.length==0&&(s=i.list.find("img").eq(0)),s.trigger("click",{how:e})},prevClick:function(t){typeof t.data.self.options.previous=="function"&&t.data.self.options.previous(this);var e=t.data.self,i=e.active.parents("li:first").prev().find("img");i.length==0&&(i=e.list.find("img:last")),i.trigger("click")},playClick:function(t){var e=t.data.self;e.options.autoPlay=!e.options.autoPlay,e.imgPlay.toggleClass("play").toggleClass("pause"),e.options.autoPlay&&e.nextClick()}})}(jQuery);